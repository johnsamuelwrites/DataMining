
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>TP 1 &#8212; Data Mining</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'fr/TP1/tp1';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="TP 2" href="../TP2/tp2.html" />
    <link rel="prev" title="TP 0" href="../TP0/tp0.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../README.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/datamining.svg" class="logo__image only-light" alt="Data Mining - Home"/>
    <img src="../../_static/datamining.svg" class="logo__image only-dark pst-js-only" alt="Data Mining - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../README.html">
                    DataMining
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Fran√ßais</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../README.html">Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TP0/tp0.html">TP 0</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">TP 1</a></li>








<li class="toctree-l1"><a class="reference internal" href="../TP2/tp2.html">TP 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TP3/tp3.html">TP 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Projet/Projet.html">Projet</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">English</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../en/README.html">Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../en/practical0/practical0.html">Programming Session 0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../en/practical1/practical1.html">Programming Session 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../en/practical2/practical2.html">Practical 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../en/practical3/practical3.html">Practical 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../en/Project/project.html">Project</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/johnsamuelwrites/DataMining/master?urlpath=lab/tree/fr/TP1/tp1.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="../../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/johnsamuelwrites/DataMining/blob/master/fr/TP1/tp1.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/fr/TP1/tp1.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>TP 1</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">TP 1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#objectifs">Objectifs</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercices">Exercices</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#captures-d-ecran">Captures d‚Äô√©cran</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-1">Exercice 1 ‚òÖ</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-2">Exercice 2 ‚òÖ</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#remarques-importantes">Remarques importantes :</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#explorer-l-acces-aux-donnees-colonne-par-colonne">Explorer l‚Äôacc√®s aux donn√©es colonne par colonne</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtrer-les-donnees-par-annee">Filtrer les donn√©es par ann√©e</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gerer-les-donnees-manquantes-ou-incorrectes">G√©rer les donn√©es manquantes ou incorrectes</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-3">Exercice 3 ‚òÖ‚òÖ</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gestion-des-valeurs-manquantes">Gestion des valeurs manquantes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtrage-des-donnees">Filtrage des donn√©es</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#groupement-et-agregation">Groupement et agr√©gation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exportation-des-donnees">Exportation des donn√©es</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-4">Exercice 4 ‚òÖ‚òÖ</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtrer-les-donnees-pour-une-periode-specifique">Filtrer les donn√©es pour une p√©riode sp√©cifique</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compter-les-langages-par-annee">Compter les langages par ann√©e</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#identifier-les-langages-ayant-la-date-de-creation-la-plus-recente">Identifier les langages ayant la date de cr√©ation la plus r√©cente</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-5">Exercice 5 ‚òÖ‚òÖ‚òÖ</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-6">Exercice 6 ‚òÖ‚òÖ‚òÖ</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="tp-1">
<h1>TP 1<a class="headerlink" href="#tp-1" title="Link to this heading">#</a></h1>
</section>
<section id="objectifs">
<h1>Objectifs<a class="headerlink" href="#objectifs" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Analyser et travailler avec des fichiers CSV, TSV et JSON</p></li>
<li><p>Interroger des sources de donn√©es externes</p></li>
<li><p>Analyses de donn√©es</p></li>
</ul>
<section id="exercices">
<h2>Exercices<a class="headerlink" href="#exercices" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Analyse et lecture de fichiers CSV/TSV</p></li>
<li><p>Analyse et lecture des fichiers JSON</p></li>
<li><p>Interrogation de sources de donn√©es externes (API)</p></li>
<li><p>Effectuer des analyses de donn√©es classiques</p></li>
</ol>
</section>
</section>
<section id="captures-d-ecran">
<h1>Captures d‚Äô√©cran<a class="headerlink" href="#captures-d-ecran" title="Link to this heading">#</a></h1>
<p>Des captures d‚Äô√©cran ont √©t√© fournies afin que vous puissiez v√©rifier et comparer si le r√©sultat que vous obtenez correspond √† ce que nous attendons de l‚Äô√©tape (ou de l‚Äôexercice) en question.</p>
</section>
<section id="exercice-1">
<h1>Exercice 1 ‚òÖ<a class="headerlink" href="#exercice-1" title="Link to this heading">#</a></h1>
<p>Nous installons d‚Äôabord les packages n√©cessaires. Dans les notebooks Jupyter, vous pouvez utiliser la commande <code class="docutils literal notranslate"><span class="pre">!</span></code> pour ex√©cuter des commandes shell directement depuis une cellule du notebook.<br />
Pour installer des packages Python tels que NumPy et pandas, vous pouvez utiliser la commande suivante :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip3<span class="w"> </span>install<span class="w"> </span>numpy<span class="w"> </span>pandas<span class="w"> </span>matplotlib<span class="w"> </span>sparqlwrapper
</pre></div>
</div>
</div>
</div>
<p>Pour importer les biblioth√®ques NumPy et pandas dans un notebook Jupyter, utilisez les instructions d‚Äôimportation Python suivantes :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plot</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">SPARQLWrapper</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sw</span>
</pre></div>
</div>
</div>
</div>
<p>L‚Äôattribut <code class="docutils literal notranslate"><span class="pre">__version__</span></code> est un moyen courant d‚Äôacc√©der aux informations de version d‚Äôun package Python.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sw</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Effectuez les exercices donn√©s dans le <a class="reference internal" href="../TP0/tp0.html"><span class="std std-doc">TP 0</span></a>.</p>
</section>
<section id="exercice-2">
<h1>Exercice 2 ‚òÖ<a class="headerlink" href="#exercice-2" title="Link to this heading">#</a></h1>
<p>La plupart du temps, nous travaillons avec des fichiers CSV (comma-separated values) pour l‚Äôanalyse des donn√©es. Un fichier CSV est constitu√© d‚Äôune ou plusieurs lignes et chaque ligne comporte une ou plusieurs valeurs s√©par√©es par des virgules. On peut consid√©rer chaque ligne comme une rang√©e et chaque valeur d‚Äôune ligne comme une valeur de colonne. La premi√®re ligne est parfois utilis√©e pour d√©crire les noms des colonnes.</p>
<p>Copier le fichier
<a class="reference download internal" download="" href="../../_downloads/8bd6c4fffa907a011f0abc1d5130d114/pl.csv"><span class="xref download myst">pl.csv</span></a> dans votre r√©pertoire de travail actuel (o√π vous ex√©cutez Jupyter : TP1) et utilisez le code suivant pour analyser le fichier csv. Remarquez les noms de colonnes et les types de donn√©es (U100, i4), o√π U100 correspond √† une cha√Æne unicode de 100 caract√®res et i4 correspond √† un entier sign√© de 32 bits.</p>
<p>Veuillez consulter la liste compl√®te des dtypes <a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.dtypes.html">ici</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span>
    <span class="s2">&quot;../../data/pl.csv&quot;</span><span class="p">,</span>  <span class="c1"># Remplacez cette valeur par le chemin d&#39;acc√®s de votre fichier CSV.</span>
    <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;names&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">),</span> <span class="s2">&quot;formats&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;U100&quot;</span><span class="p">,</span> <span class="s2">&quot;i4&quot;</span><span class="p">)},</span>
    <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>  <span class="c1"># passez la premi√®re ligne, puisque c&#39;est l&#39;en-t√™te</span>
    <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">,</span>  <span class="c1"># le s√©parateur est une virgule puisqu&#39;il s&#39;agit d&#39;un fichier CSV.</span>
    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">,</span>  <span class="c1"># encodage UTF-8</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code></strong> : Cette fonction charge des donn√©es √† partir d‚Äôun fichier texte, chaque ligne du fichier √©tant convertie en un √©l√©ment d‚Äôun tableau NumPy.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">&quot;../data/pl.csv&quot;</span></code></strong> : Le chemin vers le fichier CSV. Vous devez le remplacer par le chemin r√©el o√π se trouve votre fichier CSV.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">dtype={&quot;names&quot;:</span> <span class="pre">(&quot;name&quot;,</span> <span class="pre">&quot;year&quot;),</span> <span class="pre">&quot;formats&quot;:</span> <span class="pre">(&quot;U100&quot;,</span> <span class="pre">&quot;i4&quot;)}</span></code></strong> : Sp√©cifie le type de donn√©es du tableau NumPy r√©sultant. Ici, <code class="docutils literal notranslate"><span class="pre">dtype</span></code> est d√©fini comme un dictionnaire avec :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">names</span></code> : Un tuple indiquant les noms des colonnes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">formats</span></code> : Un tuple indiquant le type de donn√©es de chaque colonne. <code class="docutils literal notranslate"><span class="pre">&quot;U100&quot;</span></code> repr√©sente une cha√Æne Unicode de longueur maximale 100, et <code class="docutils literal notranslate"><span class="pre">&quot;i4&quot;</span></code> repr√©sente un entier sur 4 octets.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">skiprows=1</span></code></strong> : Ce param√®tre permet d‚Äôignorer la premi√®re ligne du fichier CSV, suppos√©e √™tre l‚Äôen-t√™te.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">delimiter=&quot;,&quot;</span></code></strong> : Sp√©cifie le d√©limiteur s√©parant les valeurs dans le fichier CSV. Ici, il s‚Äôagit d‚Äôune virgule.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">encoding=&quot;UTF-8&quot;</span></code></strong> : Sp√©cifie l‚Äôencodage du fichier. UTF-8 est un encodage couramment utilis√© pour les fichiers texte.</p></li>
</ul>
<section id="remarques-importantes">
<h2>Remarques importantes :<a class="headerlink" href="#remarques-importantes" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p><strong>Chemin du fichier</strong> : Assurez-vous que le chemin du fichier (<code class="docutils literal notranslate"><span class="pre">&quot;../data/pl.csv&quot;</span></code>) est correct par rapport √† votre notebook Jupyter ou votre script. Vous devrez peut-√™tre l‚Äôajuster en fonction de l‚Äôemplacement r√©el de votre fichier CSV.</p></li>
<li><p><strong>Structure du fichier CSV</strong> : Le fichier CSV doit contenir une ligne d‚Äôen-t√™te correspondant aux noms de colonnes sp√©cifi√©s dans le param√®tre <code class="docutils literal notranslate"><span class="pre">dtype</span></code>, suivie des lignes de donn√©es.</p></li>
<li><p><strong>Types de donn√©es des colonnes</strong> : V√©rifiez que les types de donn√©es (<code class="docutils literal notranslate"><span class="pre">&quot;U100&quot;</span></code> pour les cha√Ænes de caract√®res et <code class="docutils literal notranslate"><span class="pre">&quot;i4&quot;</span></code> pour les entiers) correspondent bien aux donn√©es r√©elles de votre fichier CSV.</p></li>
</ol>
<p><img alt="" src="fr/TP1/images/numpycsv.png" /></p>
<p><a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html">Soutien du CSV en numpy</a>
(<strong>Ref:</strong>
(<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html">https://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html</a>))
est diff√©rent du d√©faut de Python <a class="reference external" href="https://docs.python.org/3.9/library/csv.html">CSV
reader</a> (<strong>Ref:</strong>
(<a class="reference external" href="https://docs.python.org/3.9/library/csv.html">https://docs.python.org/3.9/library/csv.html</a>))
en raison de sa capacit√© √† prendre en charge les <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html">types de donn√©es</a>
(<strong>Ref:</strong>
(<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html">https://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html</a>)).
Avant de continuer, examinez en profondeur
<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html">numpy.loadtxt</a>
(<strong>Ref:</strong>
(<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html">https://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html</a>)).</p>
<p>Copier le fichier
<a class="reference download internal" download="" href="../../_downloads/3efbb5784ae36153542449224c638155/pl.tsv"><span class="xref download myst">pl.tsv</span></a> dans votre r√©pertoire de travail actuel et utilisez le code suivant pour analyser le fichier TSV.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span>
    <span class="s2">&quot;../../data/pl.tsv&quot;</span><span class="p">,</span>  <span class="c1"># Remplacez cette valeur par le chemin d&#39;acc√®s de votre fichier TSV.</span>
    <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;names&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">),</span> <span class="s2">&quot;formats&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;U100&quot;</span><span class="p">,</span> <span class="s2">&quot;i4&quot;</span><span class="p">)},</span>
    <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>  <span class="c1"># le s√©parateur est &#39;\t&#39; puisqu&#39;il s&#39;agit d&#39;un fichier TSV.</span>
    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Les changements dans le code ci-dessus par rapport au pr√©c√©dent. Un fichier TSV est un fichier s√©par√© par des tabulations, c‚Äôest-√†-dire que les valeurs des colonnes sont s√©par√©es par un
tabulation ((\t)).</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code></strong> : Cette fonction charge des donn√©es √† partir d‚Äôun fichier texte, chaque ligne du fichier √©tant convertie en un √©l√©ment d‚Äôun tableau NumPy.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">&quot;../data/pl.tsv&quot;</span></code></strong> : Le chemin vers le fichier TSV. Vous devez le remplacer par le chemin r√©el o√π se trouve votre fichier TSV.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">dtype={&quot;names&quot;:</span> <span class="pre">(&quot;name&quot;,</span> <span class="pre">&quot;year&quot;),</span> <span class="pre">&quot;formats&quot;:</span> <span class="pre">(&quot;U100&quot;,</span> <span class="pre">&quot;i4&quot;)}</span></code></strong> : Sp√©cifie le type de donn√©es du tableau NumPy r√©sultant. Ici, <code class="docutils literal notranslate"><span class="pre">dtype</span></code> est d√©fini comme un dictionnaire avec :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">names</span></code> : Un tuple indiquant les noms des colonnes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">formats</span></code> : Un tuple indiquant le type de donn√©es de chaque colonne. <code class="docutils literal notranslate"><span class="pre">&quot;U100&quot;</span></code> repr√©sente une cha√Æne Unicode de longueur maximale 100, et <code class="docutils literal notranslate"><span class="pre">&quot;i4&quot;</span></code> repr√©sente un entier sur 4 octets.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">skiprows=1</span></code></strong> : Ce param√®tre permet d‚Äôignorer la premi√®re ligne du fichier TSV, suppos√©e √™tre l‚Äôen-t√™te.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">delimiter=&quot;\t&quot;</span></code></strong> : Sp√©cifie le d√©limiteur s√©parant les valeurs dans le fichier TSV. Ici, il s‚Äôagit d‚Äôune tabulation.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">encoding=&quot;UTF-8&quot;</span></code></strong> : Sp√©cifie l‚Äôencodage du fichier. UTF-8 est un encodage couramment utilis√© pour les fichiers texte.</p></li>
</ul>
<p>Pour compter le nombre de lignes dans votre jeu de donn√©es, vous pouvez utiliser <code class="docutils literal notranslate"><span class="pre">len()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>Vous pouvez √©galement afficher la sortie des variables et m√©thodes dans un Notebook sans <code class="docutils literal notranslate"><span class="pre">print()</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="explorer-l-acces-aux-donnees-colonne-par-colonne">
<h2>Explorer l‚Äôacc√®s aux donn√©es colonne par colonne<a class="headerlink" href="#explorer-l-acces-aux-donnees-colonne-par-colonne" title="Link to this heading">#</a></h2>
<p>Extraire et afficher uniquement la colonne <code class="docutils literal notranslate"><span class="pre">&quot;name&quot;</span></code> du jeu de donn√©es.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Extraire et afficher uniquement la colonne <code class="docutils literal notranslate"><span class="pre">&quot;year&quot;</span></code> du jeu de donn√©es.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="filtrer-les-donnees-par-annee">
<h2>Filtrer les donn√©es par ann√©e<a class="headerlink" href="#filtrer-les-donnees-par-annee" title="Link to this heading">#</a></h2>
<p>Trouvez et affichez toutes les lignes o√π l‚Äôann√©e est sup√©rieure √† 1960.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filtered_data</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1960</span><span class="p">]</span>
<span class="n">filtered_data</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="gerer-les-donnees-manquantes-ou-incorrectes">
<h2>G√©rer les donn√©es manquantes ou incorrectes<a class="headerlink" href="#gerer-les-donnees-manquantes-ou-incorrectes" title="Link to this heading">#</a></h2>
<p>V√©rifiez le code suivant qui contient certaines valeurs manquantes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Enregistrez un fichier CSV modifi√© avec une valeur manquante (manuellement ou via script)</span>
<span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s2">&quot;pl_missing.csv&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;Simula&quot;</span><span class="p">,</span> <span class="mi">1962</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Swift&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)],</span> <span class="n">header</span><span class="o">=</span><span class="s2">&quot;name,year&quot;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Tentez de charger avec np.loadtxt (cela provoquera une erreur)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">dataset_with_missing_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;pl_missing.csv&quot;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;names&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">),</span> <span class="s2">&quot;formats&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;U100&quot;</span><span class="p">,</span> <span class="s2">&quot;i4&quot;</span><span class="p">)},</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Erreur :&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Charger avec np.genfromtxt (g√®re les valeurs manquantes)</span>
<span class="n">dataset_with_missing_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">genfromtxt</span><span class="p">(</span><span class="s2">&quot;pl_missing.csv&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;names&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">),</span> <span class="s2">&quot;formats&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;U100&quot;</span><span class="p">,</span> <span class="s2">&quot;i4&quot;</span><span class="p">)},</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span>
<span class="n">dataset_with_missing_values</span>
</pre></div>
</div>
</div>
</div>
<p>Utiliser <code class="docutils literal notranslate"><span class="pre">filling_values</span></code> pour une colonne sp√©cifique</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Charger le jeu de donn√©es avec des valeurs par d√©faut pour les entr√©es manquantes</span>
<span class="n">dataset_with_missing_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">genfromtxt</span><span class="p">(</span>
    <span class="s2">&quot;pl_missing.csv&quot;</span><span class="p">,</span>
    <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;U100&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;i4&quot;</span><span class="p">)],</span>
    <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">,</span>
    <span class="n">names</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># La premi√®re ligne contient les noms des colonnes</span>
    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">,</span>
    <span class="n">missing_values</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>  <span class="c1"># Traiter les valeurs vides comme manquantes</span>
    <span class="n">filling_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>  <span class="c1"># Remplacer les ann√©es manquantes par 0</span>
<span class="p">)</span>

<span class="n">dataset_with_missing_values</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">np.loadtxt()</span></code> g√©n√©rera une erreur en raison des valeurs manquantes. <code class="docutils literal notranslate"><span class="pre">np.genfromtxt()</span></code> chargera le jeu de donn√©es, en rempla√ßant les valeurs manquantes par <code class="docutils literal notranslate"><span class="pre">nan</span></code> ou une valeur par d√©faut.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Convertir les donn√©es en DataFrame Pandas</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># Convertir le tableau structur√© NumPy en DataFrame Pandas</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>

<span class="c1"># Afficher le DataFrame</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Question</strong> : Quelle est la diff√©rence entre <code class="docutils literal notranslate"><span class="pre">np.loadtxt()</span></code> et <code class="docutils literal notranslate"><span class="pre">np.genfromtxt()</span></code> lors de la lecture de fichiers CSV ? Quand faut-il privil√©gier l‚Äôun par rapport √† l‚Äôautre ?</p>
</section>
</section>
<section id="exercice-3">
<h1>Exercice 3 ‚òÖ‚òÖ<a class="headerlink" href="#exercice-3" title="Link to this heading">#</a></h1>
<p>La plupart des sources de donn√©es externes peuvent fournir leurs donn√©es au format JSON.
Notre prochain exercice consiste √† analyser les fichiers JSON. Copiez le fichier
<a class="reference download internal" download="" href="../../_downloads/02d8e3487eae86363474b4252d118db1/pl.json"><span class="xref download myst">pl.json</span></a> √† votre r√©pertoire de travail actuel et utilisez le code suivant pour analyser le fichier JSON. Dans cet exercice, nous utilisons <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/">Pandas python
package</a> (<strong>Ref:</strong>
(<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/">https://pandas.pydata.org/pandas-docs/stable/</a>)) d‚Äôanalyser le fichier JSON pour obtenir un <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html">Pandas DataFrame</a>
(<strong>Ref:</strong>
(<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html">https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html</a>)).
Essayez d‚Äôutiliser des m√©thodes comme
<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.transpose.html#pandas.DataFrame.transpose">transpose</a>
(<strong>Ref:</strong>
(<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.transpose.html#pandas.DataFrame.transpose">https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.transpose.html#pandas.DataFrame.transpose</a>)),
<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.count.html#pandas.DataFrame.count">count</a>
(<strong>Ref:</strong>
(<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.count.html#pandas.DataFrame.count">https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.count.html#pandas.DataFrame.count</a>))
etc.</p>
<p>Avant de continuer cet exercice, veuillez vous entra√Æner √† travailler avec des pandas.
Consultez <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/10min.html">10 minutes to pandas</a>
(<strong>Ref:</strong> (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/10min.html">https://pandas.pydata.org/pandas-docs/stable/10min.html</a>)).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="kn">import</span> <span class="n">json_normalize</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

<span class="c1"># Charger les donn√©es JSON √† partir d&#39;un fichier</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;../../data/pl.json&quot;</span><span class="p">))</span>

<span class="c1"># Convertir les donn√©es JSON en un DataFrame pandas</span>
<span class="n">dataframe</span> <span class="o">=</span> <span class="n">json_normalize</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataframe</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Ce code utilise la biblioth√®que pandas de Python pour travailler avec des donn√©es JSON.</p>
<p>*. <strong>Imports</strong> :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">pandas</span> <span class="pre">import</span> <span class="pre">json_normalize</span></code> : Importe la fonction <code class="docutils literal notranslate"><span class="pre">json_normalize</span></code> de la biblioth√®que pandas. Cette fonction est utilis√©e pour aplatir les donn√©es JSON en un DataFrame.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pandas</span> <span class="pre">as</span> <span class="pre">pd</span></code> : Importe la biblioth√®que pandas avec l‚Äôalias <code class="docutils literal notranslate"><span class="pre">pd</span></code>, qui est une convention courante.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">json</span></code> : Importe le module int√©gr√© <code class="docutils literal notranslate"><span class="pre">json</span></code> de Python pour manipuler les donn√©es JSON.</p></li>
</ul>
<p>*. <strong>Chargement des donn√©es JSON</strong> :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">=</span> <span class="pre">json.load(open(&quot;../data/pl.json&quot;))</span></code> : Ouvre un fichier JSON situ√© √† <code class="docutils literal notranslate"><span class="pre">&quot;../data/pl.json&quot;</span></code> et charge son contenu dans la variable <code class="docutils literal notranslate"><span class="pre">data</span></code>. La fonction <code class="docutils literal notranslate"><span class="pre">json.load()</span></code> lit le fichier JSON et le transforme en un dictionnaire Python.</p></li>
</ul>
<p>*. <strong>Normalisation du JSON en DataFrame</strong> :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dataframe</span> <span class="pre">=</span> <span class="pre">json_normalize(data)</span></code> : Utilise la fonction <code class="docutils literal notranslate"><span class="pre">json_normalize()</span></code> de pandas pour convertir les donn√©es JSON imbriqu√©es (<code class="docutils literal notranslate"><span class="pre">data</span></code>) en une structure plate de type tableau, appel√©e DataFrame. Cette √©tape est particuli√®rement utile pour analyser des donn√©es JSON structur√©es o√π des objets ou tableaux imbriqu√©s doivent √™tre repr√©sent√©s sous forme tabulaire.</p></li>
</ul>
<p>Et l‚Äôaffichage sans <code class="docutils literal notranslate"><span class="pre">print()</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span>
</pre></div>
</div>
</div>
</div>
<p>Pour afficher les valeurs de la colonne <strong>year</strong>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Pour afficher les valeurs de la colonne <strong>languageLabel</strong>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;languageLabel&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Obtenir des informations importantes comme le nombre, le minimum, le maximum en utilisant <code class="docutils literal notranslate"><span class="pre">describe()</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>La m√©thode <code class="docutils literal notranslate"><span class="pre">dataframe.describe()</span></code> de pandas g√©n√®re des statistiques descriptives qui r√©sument la tendance centrale, la dispersion et la forme de la distribution d‚Äôun jeu de donn√©es. Voici ce que chaque partie inclut g√©n√©ralement :</p>
<ol class="arabic simple">
<li><p><strong>Count</strong> : Nombre d‚Äôobservations non-nulles (lignes) dans chaque colonne.</p></li>
<li><p><strong>Mean</strong> : Valeur moyenne de chaque colonne num√©rique.</p></li>
<li><p><strong>Std (√âcart-type)</strong> : Mesure de la dispersion ou de l‚Äô√©tendue des valeurs dans chaque colonne num√©rique.</p></li>
<li><p><strong>Min</strong> : La plus petite valeur dans chaque colonne num√©rique.</p></li>
<li><p><strong>25% (Percentile)</strong> : La valeur en dessous de laquelle 25% des observations tombent (1er quartile).</p></li>
<li><p><strong>50% (M√©diane)</strong> : La m√©diane ou le 50e percentile.</p></li>
<li><p><strong>75% (Percentile)</strong> : La valeur en dessous de laquelle 75% des observations tombent (3e quartile).</p></li>
<li><p><strong>Max</strong> : La plus grande valeur dans chaque colonne num√©rique.</p></li>
</ol>
<p>Lorsque vous appelez <code class="docutils literal notranslate"><span class="pre">describe()</span></code> sur un DataFrame pandas (<code class="docutils literal notranslate"><span class="pre">dataframe</span></code> dans ce cas), il analyse uniquement les colonnes num√©riques par d√©faut et fournit le r√©sum√© statistique pour chacune de ces colonnes. Les colonnes non num√©riques sont ignor√©es, sauf si elles sont sp√©cifiquement incluses en utilisant des param√®tres suppl√©mentaires.</p>
<p>Cette m√©thode est utile pour obtenir rapidement un aper√ßu des valeurs num√©riques de votre jeu de donn√©es, identifier les valeurs aberrantes, comprendre la distribution de vos donn√©es, etc.</p>
<p>Pour obtenir les valeurs uniques de la colonne <strong>year</strong> :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Pour obtenir les valeurs uniques de la colonne <strong>languageLabel</strong> :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;languageLabel&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Pour trier les valeurs par une ou plusieurs colonnes</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s2">&quot;year&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;languageLabel&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s2">&quot;languageLabel&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Pour obtenir les types de donn√©es des colonnes</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
</div>
<p>L‚Äôattribut <code class="docutils literal notranslate"><span class="pre">dataframe.dtypes</span></code> dans pandas retourne les types de donn√©es de chaque colonne dans le DataFrame <code class="docutils literal notranslate"><span class="pre">dataframe</span></code>. Il fournit des informations sur la mani√®re dont pandas a interpr√©t√© les donn√©es provenant du JSON (ou de toute autre source) lors de sa lecture initiale et de son processus de normalisation. Voici ce que vous verrez g√©n√©ralement :</p>
<ul class="simple">
<li><p><strong>Types num√©riques</strong> : Entiers (<code class="docutils literal notranslate"><span class="pre">int64</span></code>), nombres √† virgule flottante (<code class="docutils literal notranslate"><span class="pre">float64</span></code>).</p></li>
<li><p><strong>Type Objet</strong> : Typiquement des cha√Ænes de caract√®res (<code class="docutils literal notranslate"><span class="pre">object</span></code>), mais peut √©galement inclure d‚Äôautres objets Python.</p></li>
<li><p><strong>Types Date/Heure</strong> : Si applicable, pandas reconna√Ætra et √©tiquettera les donn√©es de date/heure de mani√®re appropri√©e (<code class="docutils literal notranslate"><span class="pre">datetime64</span></code>).</p></li>
<li><p><strong>Types Cat√©goriels</strong> : Si pandas identifie une colonne avec un petit nombre de valeurs uniques, il peut lui attribuer un type <code class="docutils literal notranslate"><span class="pre">category</span></code>, ce qui peut optimiser l‚Äôutilisation de la m√©moire et acc√©l√©rer certaines op√©rations.</p></li>
</ul>
<section id="gestion-des-valeurs-manquantes">
<h2>Gestion des valeurs manquantes<a class="headerlink" href="#gestion-des-valeurs-manquantes" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Identifier les valeurs manquantes dans le jeu de donn√©es.</p></li>
<li><p>Remplacer les valeurs manquantes dans la colonne ‚Äúyear‚Äù par l‚Äôann√©e m√©diane.</p></li>
<li><p>Remplacer les valeurs manquantes dans les colonnes cat√©gorielles (par exemple, ‚ÄúlanguageLabel‚Äù) par ‚ÄúInconnu‚Äù.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;coerce&quot;</span><span class="p">)</span>

<span class="c1"># Identifier les valeurs manquantes</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataframe</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>

<span class="c1"># Remplacer les valeurs manquantes dans &quot;year&quot; par la valeur m√©diane</span>
<span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Remplacer les valeurs manquantes dans &quot;languageLabel&quot; par &quot;Inconnu&quot;</span>
<span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;languageLabel&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s2">&quot;Inconnu&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="filtrage-des-donnees">
<h2>Filtrage des donn√©es<a class="headerlink" href="#filtrage-des-donnees" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Extraire toutes les lignes o√π ‚Äúyear‚Äù est sup√©rieur √† 1960.</p></li>
<li><p>Extraire toutes les lignes o√π ‚ÄúlanguageLabel‚Äù est ‚ÄúBCPL‚Äù.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span> <span class="o">=</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;i4&quot;</span><span class="p">,</span> <span class="s2">&quot;languageLabel&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;U200&quot;</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filtrer les lignes o√π &quot;year&quot; est sup√©rieur √† 1960</span>
<span class="n">filtered_year</span> <span class="o">=</span> <span class="n">dataframe</span><span class="p">[</span><span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1960</span><span class="p">]</span>
<span class="n">filtered_year</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filtrer les lignes o√π &quot;languageLabel&quot; est &quot;BCPL&quot;</span>
<span class="n">filtered_language</span> <span class="o">=</span> <span class="n">dataframe</span><span class="p">[</span><span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;languageLabel&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;BCPL&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">filtered_language</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="groupement-et-agregation">
<h2>Groupement et agr√©gation<a class="headerlink" href="#groupement-et-agregation" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Compter combien d‚Äôentr√©es existent par ‚ÄúlanguageLabel‚Äù.</p></li>
<li><p>Compter combien d‚Äôentr√©es existent par ‚Äúyear‚Äù.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compter combien d&#39;entr√©es existent par &quot;languageLabel&quot;</span>
<span class="n">language_label_counts</span> <span class="o">=</span> <span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;languageLabel&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>

<span class="c1"># Compter combien d&#39;entr√©es existent par &quot;year&quot;</span>
<span class="n">year_counts</span> <span class="o">=</span> <span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="exportation-des-donnees">
<h2>Exportation des donn√©es<a class="headerlink" href="#exportation-des-donnees" title="Link to this heading">#</a></h2>
<p>Sauvegarder le DataFrame modifi√© dans un nouveau fichier JSON.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Sauvegarder dans un fichier JSON</span>
<span class="n">dataframe</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s2">&quot;modified_pl.json&quot;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;records&quot;</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Enregistrez-le √©galement sous forme de fichier CSV.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Enregistrer dans un fichier CSV</span>
<span class="n">dataframe</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;modified_pl.csv&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Question :</strong> Quelle est la diff√©rence entre <code class="docutils literal notranslate"><span class="pre">json.load()</span></code> et <code class="docutils literal notranslate"><span class="pre">json.loads()</span></code> en Python ?</p>
</section>
</section>
<section id="exercice-4">
<h1>Exercice 4 ‚òÖ‚òÖ<a class="headerlink" href="#exercice-4" title="Link to this heading">#</a></h1>
<p>Dans cet exercice, nous examinerons comment t√©l√©charger des donn√©es √† partir
des sources de donn√©es externes utilisant des interfaces d‚Äôinterrogation sp√©ciales. Par exemple, les donn√©es ci-dessus ont √©t√© obtenues √† partir de <a class="reference external" href="https://query.wikidata.org/">Wikidata query</a></p>
<p><img alt="" src="fr/TP1/images/wikidataquery.png" /></p>
<p>Vous trouverez ci-dessous le code permettant de lire les donn√©es provenant d‚Äôune source externe. Utilisez ce
<a class="reference external" href="https://query.wikidata.org/sparql?query=SELECT%20%3FlanguageLabel%20(YEAR(%3Finception)%20as%20%3Fyear)%0AWHERE%0A%7B%0A%20%20%23instances%20of%20programming%20language%0A%20%20%3Flanguage%20wdt%3AP31%20wd%3AQ9143%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wdt%3AP571%20%3Finception%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20rdfs%3Alabel%20%3FlanguageLabel.%0A%20%20FILTER(lang(%3FlanguageLabel)%20%3D%20%22en%22)%0A%7D%0AORDER%20BY%20%3Fyear%0ALIMIT%20100&amp;amp;format=json">url</a>:
(<a class="reference external" href="https://query.wikidata.org/sparql?query=SELECT%20%3FlanguageLabel%20(YEAR(%3Finception)%20as%20%3Fyear">https://query.wikidata.org/sparql?query=SELECT %3FlanguageLabel (YEAR(%3Finception) as %3Fyear</a>)%0AWHERE%0A%7B%0A%20%20%23instances%20of%20programming%20language%0A%20%20%3Flanguage%20wdt%3AP31%20wd%3AQ9143%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wdt%3AP571%20%3Finception%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20rdfs%3Alabel%20%3FlanguageLabel.%0A%20%20FILTER(lang(%3FlanguageLabel)%20%3D%20%22en%22)%0A%7D%0AORDER%20BY%20%3Fyear%0ALIMIT%20100&amp;format=json).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">urllib.request</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://query.wikidata.org/sparql?query=SELECT</span><span class="si">%20%</span><span class="s2">3FlanguageLabel%20(YEAR(</span><span class="si">%3F</span><span class="s2">inception)</span><span class="si">%20a</span><span class="s2">s</span><span class="si">%20%</span><span class="s2">3Fyear)%0AWHERE%0A%7B%0A</span><span class="si">%20%</span><span class="s2">20</span><span class="si">%23i</span><span class="s2">nstances</span><span class="si">%20o</span><span class="s2">f%20programming</span><span class="si">%20la</span><span class="s2">nguage%0A</span><span class="si">%20%</span><span class="s2">20</span><span class="si">%3F</span><span class="s2">language%20wdt%3AP31%20wd%3AQ9143%3B%0A</span><span class="si">%20%</span><span class="s2">20</span><span class="si">%20%</span><span class="s2">20</span><span class="si">%20%</span><span class="s2">20</span><span class="si">%20%</span><span class="s2">20</span><span class="si">%20%</span><span class="s2">20</span><span class="si">%20%</span><span class="s2">20wdt%3AP571</span><span class="si">%20%</span><span class="s2">3Finception%3B%0A</span><span class="si">%20%</span><span class="s2">20</span><span class="si">%20%</span><span class="s2">20</span><span class="si">%20%</span><span class="s2">20</span><span class="si">%20%</span><span class="s2">20</span><span class="si">%20%</span><span class="s2">20</span><span class="si">%20%</span><span class="s2">20rdfs%3Alabel</span><span class="si">%20%</span><span class="s2">3FlanguageLabel.%0A</span><span class="si">%20%</span><span class="s2">20FILTER(lang(</span><span class="si">%3F</span><span class="s2">languageLabel)</span><span class="si">%20%</span><span class="s2">3D</span><span class="si">%20%</span><span class="s2">22en%22)%0A%7D%0AORDER%20BY</span><span class="si">%20%</span><span class="s2">3Fyear%0ALIMIT%20100&amp;format=json&quot;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">responsedata</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>

<span class="n">array</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">responsedata</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">][</span><span class="s2">&quot;bindings&quot;</span><span class="p">]:</span>
    <span class="n">array</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;languageLabel&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">]])</span>

<span class="n">dataframe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;languageLabel&quot;</span><span class="p">])</span>
<span class="n">dataframe</span> <span class="o">=</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;i4&quot;</span><span class="p">,</span> <span class="s2">&quot;languageLabel&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;U200&quot;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataframe</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;languageLabel&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
</div>
<section id="filtrer-les-donnees-pour-une-periode-specifique">
<h2>Filtrer les donn√©es pour une p√©riode sp√©cifique<a class="headerlink" href="#filtrer-les-donnees-pour-une-periode-specifique" title="Link to this heading">#</a></h2>
<p>Vous pouvez filtrer les donn√©es pour obtenir les langages de programmation invent√©s dans une plage d‚Äôann√©es sp√©cifique (par exemple, entre 1980 et 2000). Cela peut √™tre utile si vous √™tes uniquement int√©ress√© par les langages cr√©√©s pendant une p√©riode donn√©e.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filtrer le DataFrame pour les langages cr√©√©s entre 1980 et 2000</span>
<span class="n">filtered_df</span> <span class="o">=</span> <span class="n">dataframe</span><span class="p">[(</span><span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">1980</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dataframe</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">2000</span><span class="p">)]</span>

<span class="c1"># Afficher les donn√©es filtr√©es</span>
<span class="nb">print</span><span class="p">(</span><span class="n">filtered_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="compter-les-langages-par-annee">
<h2>Compter les langages par ann√©e<a class="headerlink" href="#compter-les-langages-par-annee" title="Link to this heading">#</a></h2>
<p>Une op√©ration utile pourrait √™tre de compter combien de langages ont √©t√© invent√©s chaque ann√©e. Cela peut vous donner une meilleure compr√©hension des tendances dans la cr√©ation des langages de programmation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compter le nombre de langages cr√©√©s par an</span>
<span class="n">languages_per_year</span> <span class="o">=</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>

<span class="c1"># Afficher le r√©sultat</span>
<span class="nb">print</span><span class="p">(</span><span class="n">languages_per_year</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="identifier-les-langages-ayant-la-date-de-creation-la-plus-recente">
<h2>Identifier les langages ayant la date de cr√©ation la plus r√©cente<a class="headerlink" href="#identifier-les-langages-ayant-la-date-de-creation-la-plus-recente" title="Link to this heading">#</a></h2>
<p>Une autre question int√©ressante √† poser pourrait √™tre de savoir quel langage a la date de cr√©ation la plus r√©cente. Nous pouvons trier le DataFrame par ann√©e et trouver les derni√®res entr√©es.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Trier le DataFrame par ann√©e et obtenir les 10 langages les plus r√©cents</span>
<span class="n">recent_languages</span> <span class="o">=</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># Afficher les 10 langages les plus r√©cents</span>
<span class="nb">print</span><span class="p">(</span><span class="n">recent_languages</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Question</strong></p>
<p>Quelle est la tendance du nombre de langages de programmation cr√©√©s au fil du temps ?</p>
<p>Pour r√©pondre √† cette question, nous devons filtrer les donn√©es pour les langages cr√©√©s entre 1960 et 2000, puis identifier l‚Äôann√©e o√π le plus grand nombre de langages de programmation a √©t√© cr√©√©. Ensuite, nous allons cr√©er un nouveau DataFrame contenant les 5 langages de programmation les plus populaires (par nombre d‚Äôoccurrences) pendant cette p√©riode.</p>
</section>
</section>
<section id="exercice-5">
<h1>Exercice 5 ‚òÖ‚òÖ‚òÖ<a class="headerlink" href="#exercice-5" title="Link to this heading">#</a></h1>
<p>Ce exercice utilisera quelques analyses de donn√©es de base. Poursuivant avec le code de l‚Äôexercice 1.4, comptons le nombre de langages de programmation sortis en un an.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grouped</span> <span class="o">=</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="n">grouped</span>
</pre></div>
</div>
</div>
</div>
<p>Vous pouvez √©galement utiliser plusieurs fonctions d‚Äôagr√©gation en utilisant agg()</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grouped</span> <span class="o">=</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s2">&quot;count&quot;</span><span class="p">])</span>
<span class="n">grouped</span>
</pre></div>
</div>
</div>
</div>
<p>Jusqu‚Äô√† pr√©sent, nous avons travaill√© avec des tableaux √† deux colonnes. Maintenant, nous nous concentrons sur des tableaux √† trois colonnes (langage de programmation, ann√©e, paradigme). Copiez le fichier <a class="reference download internal" download="" href="../../_downloads/55da9666f5708cc02da782825e24d384/plparadigm.json"><span class="xref download myst">plparadigm.json</span></a> dans votre r√©pertoire de travail. Et testez le programme suivant.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="kn">import</span> <span class="n">json_normalize</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

<span class="c1"># Charger les donn√©es JSON depuis un fichier</span>
<span class="n">jsondata</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;../../data/plparadigm.json&quot;</span><span class="p">))</span>

<span class="c1"># Cr√©er une liste vide pour stocker les donn√©es temporaires</span>
<span class="n">array</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Boucle √† travers chaque √©l√©ment des donn√©es JSON</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">jsondata</span><span class="p">:</span>
    <span class="c1"># Extraire des valeurs sp√©cifiques de chaque √©l√©ment et les ajouter √† la liste</span>
    <span class="c1"># En supposant que &quot;year&quot;, &quot;languageLabel&quot; et &quot;paradigmLabel&quot; sont des cl√©s dans les donn√©es JSON</span>
    <span class="n">array</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;languageLabel&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;paradigmLabel&quot;</span><span class="p">]])</span>

<span class="c1"># Cr√©er un DataFrame pandas √† partir de la liste avec des colonnes nomm√©es</span>
<span class="n">dataframe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;languageLabel&quot;</span><span class="p">,</span> <span class="s2">&quot;paradigmLabel&quot;</span><span class="p">])</span>

<span class="c1"># D√©finir les types de donn√©es pour les colonnes du DataFrame</span>
<span class="c1"># Cela garantit un stockage efficace et √©vite les erreurs potentielles lors des op√©rations</span>
<span class="n">dataframe</span> <span class="o">=</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span>
    <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="s2">&quot;int64&quot;</span><span class="p">,</span> <span class="s2">&quot;languageLabel&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;U200&quot;</span><span class="p">,</span> <span class="s2">&quot;paradigmLabel&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;U200&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Regrouper le DataFrame par les colonnes &quot;year&quot; et &quot;paradigmLabel&quot;</span>
<span class="n">grouped</span> <span class="o">=</span> <span class="n">dataframe</span>
</pre></div>
</div>
</div>
</div>
<p>Testez maintenant le programme suivant. Comparez la diff√©rence de rendement.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grouped</span> <span class="o">=</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;paradigmLabel&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s2">&quot;count&quot;</span><span class="p">])</span>
<span class="n">grouped</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Question 1</strong></p>
<p>Votre prochain objectif est de lancer la requ√™te suivante pour obtenir la population
des informations sur les diff√©rents pays (limit√©es √† 10000 lignes). Ex√©cutez le
suite √† la requ√™te sur <a class="reference external" href="https://query.wikidata.org">Wikidata query service</a>
et t√©l√©chargez le fichier JSON.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT DISTINCT ?countryLabel (YEAR(?date) as ?year) ?population
WHERE {
¬†?country wdt:P31 wd:Q6256; #Country 
¬†¬† p:P1082 ?populationStatement;
¬†¬†rdfs:label ?countryLabel. #Label
¬†?populationStatement ps:P1082 ?population; #population
¬†¬†pq:P585 ?date. #period in time
¬†FILTER(lang(?countryLabel)=&quot;en&quot;) #Label in English
}
ORDER by ?countryLabel ?year
LIMIT 1000
</pre></div>
</div>
<p>Maintenant, calculez et affichez les informations suivantes (en utilisant diff√©rentes
[op√©rations disponibles dans la biblioth√®que des pandas] (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/10min.html">https://pandas.pydata.org/pandas-docs/stable/10min.html</a>)
(<strong>Ref:</strong>
(<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/10min.html">https://pandas.pydata.org/pandas-docs/stable/10min.html</a>))):</p>
<ol class="arabic simple">
<li><p>La population des pays dans l‚Äôordre alphab√©tique de leur nom et
par ordre croissant d‚Äôann√©e.</p></li>
<li><p>La derni√®re population disponible de chaque pays</p></li>
<li><p>Le pays ayant la population la plus faible et la plus √©lev√©e (compte tenu de la
population la plus r√©cente)</p></li>
</ol>
<p><strong>Question 2</strong> :</p>
<p>Votre objectif suivant est d‚Äôex√©cuter la requ√™te suivante pour obtenir des informations li√©es aux articles scientifiques publi√©s apr√®s 2010 (limit√© √† 5000 lignes). Ex√©cutez la requ√™te suivante sur le <a class="reference external" href="https://query-scholarly.wikidata.org/">service de requ√™tes Wikidata</a> et t√©l√©chargez le fichier JSON.</p>
<p>Cela vous fournira les informations suivantes concernant les articles scientifiques : titre, sujet principal et ann√©e de publication.</p>
<p><strong>Remarque</strong> : Veuillez noter que l‚ÄôURL pour interroger les articles scientifiques est <a class="reference external" href="https://query-scholarly.wikidata.org/">https://query-scholarly.wikidata.org/</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT ?title ?subject ?year
{
  ?article wdt:P31 wd:Q13442814; #scientific article
           wdt:P1476 ?title; #title of the article
           wdt:P921 ?subject; #main subject
           wdt:P577 ?date. #publication date
  BIND(YEAR(?date) as ?year).
  FILTER(lang(?title) = &quot;en&quot; &amp;&amp; ?year&gt;2010)
}
LIMIT 5000
</pre></div>
</div>
<p>Maintenant, calculez et affichez les informations suivantes (en utilisant diverses <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/10min.html">op√©rations disponibles dans la biblioth√®que des pandas</a>
(<strong>Ref:</strong>
(<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/10min.html">https://pandas.pydata.org/pandas-docs/stable/10min.html</a>))):</p>
<ol class="arabic simple">
<li><p>Le nombre d‚Äôarticles publi√©s sur diff√©rents sujets chaque ann√©e.</p></li>
<li><p>Principal sujet d‚Äôint√©r√™t pour la communaut√© scientifique chaque ann√©e (sur la base
sur les r√©sultats de l‚Äôinterrogation ci-dessus).</p></li>
<li><p>Les 10 principaux sujets d‚Äôint√©r√™t pour la communaut√© scientifique (sur la base
les r√©sultats de l‚Äôinterrogation ci-dessus) depuis 2010.</p></li>
</ol>
<p><strong>Indice</strong>: Regardez les fonctions groupby, reset_index, head, tail, sort_values, count de Pandas</p>
<p><strong>Remarque</strong>: Si vous obtenez des erreurs de d√©passement de temps (time-out), veuillez modifier la LIMITE √† des valeurs inf√©rieures (1000, 2000, 5000).</p>
</section>
<section id="exercice-6">
<h1>Exercice 6 ‚òÖ‚òÖ‚òÖ<a class="headerlink" href="#exercice-6" title="Link to this heading">#</a></h1>
<p>Dans notre dernier exercice, nous allons interroger Wikidata et obtenir les URL des images. Ensuite, nous t√©l√©chargerons ces images.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>sparqlwrapper
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">SPARQLWrapper</span><span class="w"> </span><span class="kn">import</span> <span class="n">SPARQLWrapper</span><span class="p">,</span> <span class="n">JSON</span>

<span class="n">endpoint_url</span> <span class="o">=</span> <span class="s2">&quot;https://query.wikidata.org/sparql&quot;</span>

<span class="c1"># Get cities</span>
<span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;SELECT DISTINCT ?grandeville ?grandevilleLabel ?pays ?paysLabel ?image {</span>
<span class="s2">  ?grandeville wdt:P31 wd:Q1549591;</span>
<span class="s2">               wdt:P17 ?pays;</span>
<span class="s2">               wdt:P18 ?image.</span>
<span class="s2"> SERVICE wikibase:label { bd:serviceParam wikibase:language &quot;fr&quot;. }</span>
<span class="s2">}</span>
<span class="s2">LIMIT 10&quot;&quot;&quot;</span>


<span class="k">def</span><span class="w"> </span><span class="nf">get_results</span><span class="p">(</span><span class="n">endpoint_url</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
    <span class="n">user_agent</span> <span class="o">=</span> <span class="s2">&quot;WDQS-example Python/</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">sparql</span> <span class="o">=</span> <span class="n">SPARQLWrapper</span><span class="p">(</span><span class="n">endpoint_url</span><span class="p">,</span> <span class="n">agent</span><span class="o">=</span><span class="n">user_agent</span><span class="p">)</span>
    <span class="n">sparql</span><span class="o">.</span><span class="n">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="n">sparql</span><span class="o">.</span><span class="n">setReturnFormat</span><span class="p">(</span><span class="n">JSON</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sparql</span><span class="o">.</span><span class="n">query</span><span class="p">()</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>


<span class="n">array</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">get_results</span><span class="p">(</span><span class="n">endpoint_url</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>

<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">][</span><span class="s2">&quot;bindings&quot;</span><span class="p">]:</span>
    <span class="n">array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">(</span>
            <span class="n">result</span><span class="p">[</span><span class="s2">&quot;grandevilleLabel&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
            <span class="n">result</span><span class="p">[</span><span class="s2">&quot;paysLabel&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
            <span class="n">result</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ville&quot;</span><span class="p">,</span> <span class="s2">&quot;pays&quot;</span><span class="p">,</span> <span class="s2">&quot;image&quot;</span><span class="p">])</span>
<span class="n">dataframe</span> <span class="o">=</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span>
    <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ville&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;U200&quot;</span><span class="p">,</span> <span class="s2">&quot;pays&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;U200&quot;</span><span class="p">,</span> <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;U200&quot;</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">dataframe</span>
</pre></div>
</div>
</div>
</div>
<p>Nous allons maintenant t√©l√©charger les images</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">shutil</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>


<span class="k">def</span><span class="w"> </span><span class="nf">download_image</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="s2">&quot;Mozilla/5.0&quot;</span><span class="p">}</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">allow_redirects</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">image</span><span class="p">:</span>
            <span class="n">request</span><span class="o">.</span><span class="n">raw</span><span class="o">.</span><span class="n">decode_content</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">raw</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataframe</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">download_image</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Question 1</strong>:</p>
<p>Modifiez le code ci-dessus et t√©l√©chargez des images li√©es au sujet de votre choix (villes, monuments historiques, fleurs, b√¢timents, etc.).</p>
<p><strong>Question 2</strong></p>
<p>Votre objectif est de r√©cup√©rer les donn√©es des gratte-ciel (<a class="reference external" href="https://www.wikidata.org/wiki/Q11303">Q11303</a>) (nom, pays, image, hauteur) depuis Wikidata, puis de t√©l√©charger et filtrer les images en fonction de leur taille. Utilisez le code de traitement d‚Äôimage ci-dessous pour classifier les gratte-ciel en fonction du contraste de leur skyline (images de jour vs. images de nuit).</p>
<p>Quel pays poss√®de le plus grand nombre de gratte-ciel apparaissant sur des images de nuit ?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>opencv-python
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">classifier_jour_nuit</span><span class="p">(</span><span class="n">chemin_image</span><span class="p">):</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">chemin_image</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">IMREAD_GRAYSCALE</span><span class="p">)</span>  <span class="c1"># Conversion en niveaux de gris</span>
    <span class="n">luminosit√©</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>  <span class="c1"># Calcul de la luminosit√© moyenne des pixels</span>

    <span class="k">if</span> <span class="n">luminosit√©</span> <span class="o">&lt;</span> <span class="mi">60</span><span class="p">:</span>  <span class="c1"># Les images sombres sont consid√©r√©es comme des images de nuit</span>
        <span class="k">return</span> <span class="s2">&quot;nuit&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;jour&quot;</span>
</pre></div>
</div>
</div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./fr/TP1"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../TP0/tp0.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">TP 0</p>
      </div>
    </a>
    <a class="right-next"
       href="../TP2/tp2.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">TP 2</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">TP 1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#objectifs">Objectifs</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercices">Exercices</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#captures-d-ecran">Captures d‚Äô√©cran</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-1">Exercice 1 ‚òÖ</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-2">Exercice 2 ‚òÖ</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#remarques-importantes">Remarques importantes :</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#explorer-l-acces-aux-donnees-colonne-par-colonne">Explorer l‚Äôacc√®s aux donn√©es colonne par colonne</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtrer-les-donnees-par-annee">Filtrer les donn√©es par ann√©e</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gerer-les-donnees-manquantes-ou-incorrectes">G√©rer les donn√©es manquantes ou incorrectes</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-3">Exercice 3 ‚òÖ‚òÖ</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gestion-des-valeurs-manquantes">Gestion des valeurs manquantes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtrage-des-donnees">Filtrage des donn√©es</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#groupement-et-agregation">Groupement et agr√©gation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exportation-des-donnees">Exportation des donn√©es</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-4">Exercice 4 ‚òÖ‚òÖ</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtrer-les-donnees-pour-une-periode-specifique">Filtrer les donn√©es pour une p√©riode sp√©cifique</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compter-les-langages-par-annee">Compter les langages par ann√©e</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#identifier-les-langages-ayant-la-date-de-creation-la-plus-recente">Identifier les langages ayant la date de cr√©ation la plus r√©cente</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-5">Exercice 5 ‚òÖ‚òÖ‚òÖ</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-6">Exercice 6 ‚òÖ‚òÖ‚òÖ</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By John Samuel
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      ¬© Copyright 2021.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>